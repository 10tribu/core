<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<?asciidoc-toc?>
<?asciidoc-numbered?>

<article lang="en">
<articleinfo>
    <title>Chronik</title>
</articleinfo>
<simpara>Partie importante dans un logiciel : la partie historisation, véritable mémoire de celui-ci. Il est possible dans Jeedom d&#8217;historiser n&#8217;importe quelle commande de type information (binaire ou numérique). Cela vous permettra donc par exemple d&#8217;historiser une courbe de température, de consommation ou les ouvertures d&#8217;une porte&#8230;</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="../images/history.JPG"/>
  </imageobject>
  <textobject><phrase>../images/history.JPG</phrase></textobject>
</mediaobject>
</informalfigure>
<section id="_bestandteil">
<title>Bestandteil</title>
<simpara>Ici est décrit le principe d&#8217;historisation de Jeedom. Il n&#8217;est nécessaire de le comprendre que si vous rencontrez des soucis d&#8217;historisation ou que vous voulez modifier les réglages de l&#8217;historisation. Les réglages par défaut conviennent dans la plupart des cas.</simpara>
<section id="_protokollierungs_methode">
<title>Protokollierungs-Methode</title>
<simpara>Un des premiers éléments est de savoir si la commande que vous historisez est de type évènement ou non :</simpara>
<itemizedlist>
<listitem>
<simpara>
<emphasis role="strong">Non évènement</emphasis> : c&#8217;est le cas le plus simple. Jeedom va collecter toutes les 5mn la valeur de la commande et historiser le résultat.
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">Evènement</emphasis> : Jeedom sait qu&#8217;il ne peut récupérer la valeur. Il attend donc que le plugin (et indirectement le module) la lui transmette. Ensuite, en fonction de la fréquence et de vos réglages, il se peut qu&#8217;un premier lissage intervienne. En effet, si Jeedom reçoit 2 valeurs à moins de 5mn d&#8217;intervalle, il va par défaut en faire la moyenne pour n&#8217;en stocker qu&#8217;une. Vous pouvez bien sûr changer ce réglage pour qu&#8217;au lieu de la moyenne il prenne le maximum, le minimum ou au contraire qu&#8217;il garde les deux. Nous verrons par la suite comment changer ce réglage.
</simpara>
</listitem>
</itemizedlist>
</section>
<section id="_archivierung">
<title>Archivierung</title>
<simpara>L&#8217;archivage de données permet à Jeedom de réduire la quantité de données conservées en mémoire. Cela permet de ne pas utiliser trop de place et de ne pas ralentir le système. En effet, si vous conservez toute les mesures, cela fait d&#8217;autant plus de points à afficher et donc peut considérablement allonger les temps pour rendre un graphique. En cas d&#8217;un nombre trop important de points, cela peut même faire planter l&#8217;affichage du graphique.</simpara>
<simpara>L&#8217;archivage est une tâche qui se lance dans la nuit et compacte les données récupérées dans la journée. Par défaut Jeedom récupère toutes les données plus vieilles de 2h et en fait des paquets de 1h (soit une moyenne, un minimum ou un maximum en fonction des réglages). On a donc ici 2 paramètres, un pour la taille des paquets et un autre pour savoir à partir de quand en faire (pour rappel par défaut ce sont des paquets de 1h avec des données qui ont plus de 2h d&#8217;ancienneté).</simpara>
<tip><simpara>Si vous avez bien suivi vous devriez avoir une haute précision sur les 2 dernières heures seulement. Pourtant quand je me connecte à 17h, j&#8217;ai une précision sur les 17 dernières heures. Pourquoi ? En fait, pour éviter de consommer des ressources inutilement, la tâche qui fait l&#8217;archivage ne se déroule qu&#8217;une fois par jour, le soir.</simpara></tip>
<important><simpara>Bien sûr, ce principe d&#8217;archivage ne s&#8217;applique qu&#8217;aux commandes de type numérique ; sur les commandes de type binaire, Jeedom ne conserve que les dates de changement d'état.</simpara></important>
</section>
<section id="_trends_und_statistiken">
<title>Trends und Statistiken</title>
<simpara>Il est possible d&#8217;activer sur les widgets l&#8217;affichage du minimum, de la moyenne, du maximum et de la tendance (par défaut ceci est désactivé car cela a une tendance à allonger le temps d&#8217;affichage du dashboard à cause des calculs).</simpara>
<simpara>Si vous activez cette option, par défaut, Jeedom se fonde sur les données des dernières 24h pour calculer ces statistiques. Les tendances sont par défaut calculées sur 2h. Ce paramètre est bien sûr modifiable (voir plus bas).</simpara>
<simpara>La méthode de calcul de tendance est fondée sur le calcul des moindres carrés (voir <ulink url="https://fr.wikipedia.org/wiki/M%C3%A9thode_des_moindres_carr%C3%A9s">ici</ulink> pour le détail).</simpara>
<simpara>Allgemeine Chronik Konfiguration</simpara>
<simpara>La configuration générale de l&#8217;historique se passe sur la page Administration &#8594; Configuration.</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="../images/administration.png"/>
  </imageobject>
  <textobject><phrase>../images/administration.png</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Nous allons voir ici les détails de la partie configuration des commandes, qui contient toute une branche concernant l&#8217;historique.</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="../images/history3.JPG"/>
  </imageobject>
  <textobject><phrase>../images/history3.JPG</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Hier haben wir :</simpara>
<itemizedlist>
<listitem>
<simpara>
<emphasis role="strong">Afficher les statistiques sur les widgets</emphasis> : permet d&#8217;afficher ou non les statistiques sur les widgets ; il faut que le widget soit compatible, ce qui est le cas pour la plupart ; il faut aussi que la commande soit de type numérique
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">Période de calcul pour min, max, moyenne (en heures)</emphasis> : période de calcul des statistiques (par défaut 24h), il n&#8217;est pas possible de mettre moins d&#8217;une heure
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">Période de calcul pour la tendance (en heures)</emphasis> : période de calcul des tendances (par défaut 2h), il n&#8217;est pas possible de mettre moins d&#8217;une heure
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">Délai avant archivage (en heures)</emphasis> : donne le délai avant archivage, par défaut la valeur est de 24h, c&#8217;est-à-dire que les données historisées doivent avoir plus de 24h pour être archivées (pour rappel, l&#8217;archivage va soit moyenner, soit prendre le maximum ou le minimum de la donnée sur une période qui correspond à la taille des paquets)
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">Archiver par paquet de (en heures)</emphasis> : ce paramètre donne justement la taille des paquets, par defaut 1h ; cela signifie que Jeedom va prendre des périodes de 1h, moyenner (par exemple, suivant le réglage de la commande) et stocker cette nouvelle valeur (en supprimant les valeurs moyennées).
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">Seuil de calcul de tendance basse</emphasis> : cette valeur correspond au seuil de tendance basse (Jeedom indique que la valeur est en baisse), il doit être négatif (par défaut -0.1).
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">Seuil de calcul de tendance haut</emphasis> : idem mais à la tendance haute.
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">Période d&#8217;affichage des graphiques par defaut</emphasis> : pour des questions de performance lors de l&#8217;affichage à la volée (en cliquant sur le widget ou par la page historique) Jeedom n&#8217;affiche qu&#8217;une période restreinte de l&#8217;historique (cela permet un affichage plus rapide) ; il est ici possible de régler cette valeur.
</simpara>
</listitem>
</itemizedlist>
</section>
</section>
<section id="_spezifische_befehle_konfigurieren">
<title>Spezifische Befehle Konfigurieren</title>
<simpara>Pour accèder à ces réglages, il faut aller dans la configuration avancée des commandes, en passant par Outils &#8594; Résumé domotique :</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="../images/display.png"/>
  </imageobject>
  <textobject><phrase>../images/display.png</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Puis en dépliant la liste des commandes d&#8217;un équipement (petite flèche à droite) en double-cliquant sur la commande ou en cliquant sur la petite roue :</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="../images/history9.JPG"/>
  </imageobject>
  <textobject><phrase>../images/history9.JPG</phrase></textobject>
</mediaobject>
</informalfigure>
<tip><simpara>Sie können auch das Suchfeld rechts benutzen, um den Namen des Befehls einzugeben, den Sie wollen.</simpara></tip>
<simpara>Vous pouvez également y accèder par la page de l'équipement en question et en cliquant sur la petite roue à droite sur la ligne de la commande (si le plugin a intégré cette option) :</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="../images/history10.JPG"/>
  </imageobject>
  <textobject><phrase>../images/history10.JPG</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>A partir de là, vous devez avoir une fenêtre qui apparait, il faut cliquer sur "Configuration avancée" :</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="../images/display13.JPG"/>
  </imageobject>
  <textobject><phrase>../images/display13.JPG</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>A partir de là, vous avez plusieurs possibilités de réglages. En ce qui concerne l&#8217;historique, il y a :</simpara>
<itemizedlist>
<listitem>
<simpara>
<emphasis role="strong">Historiser</emphasis> : permet de définir si vous voulez historiser ou non cette commande.
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">Mode de lissage</emphasis> : mode de lissage ou d&#8217;archivage permet de choisir la manière d&#8217;archiver la donnée ; par défaut c&#8217;est une moyenne ; il est aussi possible de choisir le maximum, le minimum, ou aucun ; aucun permet de dire à Jeedom qu&#8217;il ne doit pas réaliser d&#8217;archivage sur cette commande (aussi bien sur la première période des 5 mn qu&#8217;avec la tâche d&#8217;archivage). Cette option est dangereuse car Jeedom conserve tout : il va donc y avoir beaucoup plus de données conservées.
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">Purger l&#8217;historique si plus vieux de</emphasis> : cette option permet de dire à Jeedom de supprimer toutes les données plus vieilles qu&#8217;une certaine période. Peut être pratique pour ne pas conserver de données si ça n&#8217;est pas nécessaire et donc limiter la quantité d&#8217;informations enregistrées par Jeedom.
</simpara>
</listitem>
</itemizedlist>
</section>
<section id="_diagramm_anzeigen">
<title>Diagramm anzeigen</title>
<simpara>Es gibt mehrere Möglichkeiten, um die Chronik anzuzeigen :</simpara>
<itemizedlist>
<listitem>
<simpara>
einen Diagrammbereich in einer Ansicht einsetzen (siehe unten),
</simpara>
</listitem>
<listitem>
<simpara>
Durch Klick auf den gewünschten Befehl in einem Widget,
</simpara>
</listitem>
<listitem>
<simpara>
Indem sie auf die Chronik Seite gehen, sie ermöglicht die verschiedenen Kurven zu überlagern und die Stilrichtungen zu kombinieren (Fläche, Kurve, Balken).
</simpara>
</listitem>
</itemizedlist>
<simpara>Wenn Sie eine Diagramm auf der Chronik Seite oder durch einen Klick auf das Widget angezeigt bekommen, haben Sie Zugriff auf mehrere Anzeigeoptionen :</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="../images/history4.JPG"/>
  </imageobject>
  <textobject><phrase>../images/history4.JPG</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>On retrouve en haut à droite la période d&#8217;affichage (ici sur la dernière semaine car, par défaut je veux que ça soit seulement une semaine - voir 2 paragraphes au-dessus), ensuite viennent les paramètres de la courbe (ces paramètres sont gardés d&#8217;un affichage à l&#8217;autre ; vous n&#8217;avez donc qu&#8217;a les configurer une fois).</simpara>
<itemizedlist>
<listitem>
<simpara>
<emphasis role="strong">Treppe</emphasis> : Zeigt die Kurve in Form einer Treppe oder sie wird kontinuierlich wiedergegeben.
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">Wertänderung</emphasis> : Zeigen den Unterschied der Werte im Vergleich zu dem vorherigen Punkt an.
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">Linie</emphasis> : Zeigt das Diagramm in einer Linie an.
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">Fläche</emphasis> : Zeigt das Diagramm als eine Fläche an.
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">Balken</emphasis>* : Zeigt das Diagramm in einer Balken Form an.
</simpara>
</listitem>
</itemizedlist>
<simpara>Hier einige Beispiele :</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="../images/history5.JPG"/>
  </imageobject>
  <textobject><phrase>../images/history5.JPG</phrase></textobject>
</mediaobject>
</informalfigure>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="../images/history6.JPG"/>
  </imageobject>
  <textobject><phrase>../images/history6.JPG</phrase></textobject>
</mediaobject>
</informalfigure>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="../images/history7.JPG"/>
  </imageobject>
  <textobject><phrase>../images/history7.JPG</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Auf letzteren gibt es eine höhere Genauigkeit auf die aktuellen Daten (Prinzip der Archivierung).</simpara>
</section>
<section id="_grafik_auf_der_ansicht_und_dem_design">
<title>Grafik auf der Ansicht und dem Design</title>
<simpara>Sie können die Grafik auch in der Ansicht anzeigen (hier werden wir die Konfigurationsoptionen angezeigt und nicht wie, dafür muß man sich in die Dokumention der Ansicht oder des Designs zur Funktion begeben). Hier sind die Optionen :</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="../images/history13.JPG"/>
  </imageobject>
  <textobject><phrase>../images/history13.JPG</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Sobald die Daten aktiviert sind, können Sie wählen :</simpara>
<itemizedlist>
<listitem>
<simpara>
<emphasis role="strong">Farbe</emphasis> : Die Farbe der Kurve.
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">Typ</emphasis> : Der Typ des Diagramms (Fläche, Linie oder Balken).
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">Maßstab</emphasis> : Weil Sie mehrere Diagramme (Daten) in der gleichen Grafik anzeigen können, ist es mit der Einstellung möglich, den Maßstab (rechts oder links) zu unterscheiden.
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">Treppe</emphasis> : Zeigt die Kurve in Form einer Treppe oder sie wird kontinuierlich wiedergegeben.
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">Stapeln</emphasis> : Erlaubt, die Werte der Kurven zu stapeln (siehe das Ergebnis darunter)
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">Wertänderung</emphasis> : Zeigen den Unterschied der Werte im Vergleich zu dem vorherigen Punkt an.
</simpara>
</listitem>
</itemizedlist>
<simpara>Hier ist ein Beispiel von übereinander liegenden Kurven:</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="../images/history14.JPG"/>
  </imageobject>
  <textobject><phrase>../images/history14.JPG</phrase></textobject>
</mediaobject>
</informalfigure>
</section>
<section id="_optionen_auf_der_chronik_seite">
<title>Optionen auf der Chronik Seite</title>
<simpara>Die Chronik Seite bietet Zugriff auf einige zusätzliche Optionen :</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="../images/history15.JPG"/>
  </imageobject>
  <textobject><phrase>../images/history15.JPG</phrase></textobject>
</mediaobject>
</informalfigure>
<tip><simpara>Klicken Sie einfach auf den Namen des Objekts um es zu entfalten ; angezeigt werden die archivierten Befehle, die ein Diagramm sein können.</simpara></tip>
<tip><simpara>Die Hintergrundfarbe der Objekte in dieser Liste kann in der Konfiguration des Objektes verändert werden.</simpara></tip>
<simpara>Vor jedem Datensatz der als Diagramm angezeigt werden kann, finden Sie zwei Symbole :</simpara>
<itemizedlist>
<listitem>
<simpara>
<emphasis role="strong">Papierkorb</emphasis> : Löscht die gespeicherten Daten ; beim Klicken, fragt Jeedom, ob die Daten von einem bestimmten Datum oder alle Daten zu löschen sind.
</simpara>
</listitem>
<listitem>
<simpara>
<emphasis role="strong">Pfeil</emphasis> : Erlaubt einen CSV-Export archivierter Daten.
</simpara>
</listitem>
</itemizedlist>
</section>
<section id="_löschen_von_inkonsistenten_wert">
<title>Löschen von inkonsistenten Wert</title>
<simpara>Manchmal kann es sein, dass Sie inkonsistente Werte in den Diagrammen haben. Oft ist das auf eine Auslegung der Interpretation des Wertes zurückzuführen. Sie können den Wert der betreffenden Stelle löschen oder ändern, indem sie direkt auf die Grafik klicken; darüber hinaus können Sie das zulässige Minimum und das Maximum festlegen, um zukünftige Probleme zu vermeiden.</simpara>
</section>
</article>
