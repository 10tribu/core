<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<?asciidoc-toc?>
<?asciidoc-numbered?>

<article lang="en">
<articleinfo>
    <title>Solución de problemas</title>
</articleinfo>
<variablelist>
<varlistentry>
<term>
Obtengo una página en blanco
</term>
<listitem>
<simpara>
Debe conectarse a  jeedom por SSH y lanzar un script de autodiagnóstico:
</simpara>
</listitem>
</varlistentry>
</variablelist>
<programlisting language="bash" linenumbering="unnumbered">sudo chmod +x /usr/share/nginx/www/jeedom/health.sh;sudo /usr/share/nginx/www/jeedom/health.sh</programlisting>
<simpara>Este es el resultado si todo es correcto:</simpara>
<informalfigure>
<mediaobject>
  <imageobject>
  <imagedata fileref="../images/depannage.png"/>
  </imageobject>
  <textobject><phrase>../images/depannage.png</phrase></textobject>
</mediaobject>
</informalfigure>
<simpara>Si hay un problema en el script lo intentará corregir, si no se lo indicará.</simpara>
<simpara>También puede ver el registro de usr/share/nginx/www/jeedom/log/nginx.error, muy a menudo esto le indica los problemas</simpara>
<simpara><?asciidoc-hr?></simpara>
<simpara>Tengo un problema de identificación de la BDD:
Necesidad de reajustarlos</simpara>
<programlisting language="bash" linenumbering="unnumbered">bdd_password=$(cat /dev/urandom | tr -cd 'a-f0-9' | head -c 15)
echo "DROP USER 'jeedom'@'localhost'" | mysql -uroot -p
echo "CREATE USER 'jeedom'@'localhost' IDENTIFIED BY '${bdd_password}';" | mysql -uroot -p
echo "GRANT ALL PRIVILEGES ON jeedom.* TO 'jeedom'@'localhost';" | mysql -uroot -p
cd /usr/share/nginx/www/jeedom
sudo cp core/config/common.config.sample.php core/config/common.config.php
sudo sed -i -e "s/#PASSWORD#/${bdd_password}/g" core/config/common.config.php
sudo chown www-data:www-data core/config/common.config.php</programlisting>
<simpara><?asciidoc-hr?></simpara>
<simpara>Tengo {&#8230;} en todas partes.
La cause la plus fréquente est l&#8217;utilisation d&#8217;un plugin en version beta, et Jeedom en stable, ou l&#8217;inverse</simpara>
<simpara><?asciidoc-hr?></simpara>
<variablelist>
<varlistentry>
<term>
Al lanzar un comando tengo una rueda que gira sin parar
</term>
<listitem>
<simpara>
Sin embargo, esto ocurre amenudo debido al uso de un plugin en versión beta, mientras que Jeedom es estable
</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara><?asciidoc-hr?></simpara>
<simpara>Ya no tengo acceso a Jeedom ni por  ssh:.
Este error es debido a un problema con el sistema pero no de Jeedom.
Si persiste después de la reinstalación es recomendable comprobar con el SAT si se trata de un problema de hardware</simpara>
<simpara><?asciidoc-hr?></simpara>
<variablelist>
<varlistentry>
<term>
Mi escena no funciona
</term>
<listitem>
<simpara>
Se recomienda ver los comandos ejecutadas por la escena,
a menudo esto es una orden que no termina (Bucle loop)
</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara><?asciidoc-hr?></simpara>
<variablelist>
<varlistentry>
<term>
Mon scénario est lent à se déclencher
</term>
<listitem>
<simpara>
Si la escena no tiene pausas es aconsejable chequear "ejecutar tan pronto como sea posible" (disponible en modo experto)
</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara><?asciidoc-hr?></simpara>
<variablelist>
<varlistentry>
<term>
No tengo ningún error en el registro nginx.error a pesar de los errores 500
</term>
<listitem>
<simpara>
ssh :
Editez le fichier /etc/php5/fpm/pool.d/www.conf et décommantez la ligne ";catch_worket_process=yes" (supression du ;)
Reiniciar el php "sudo service php5-fpm restart"
</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara><?asciidoc-hr?></simpara>
<variablelist>
<varlistentry>
<term>
Tengo inestabilidades o errores 504
</term>
<listitem>
<simpara>
Vérifiez si votre système de fichiers n&#8217;est pas corrompu, en ssh la commande est : "sudo dmesg | grep error"
</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara><?asciidoc-hr?></simpara>
<variablelist>
<varlistentry>
<term>
No veo todos mis dispositivos en el dashboard
</term>
<listitem>
<simpara>
A menudo esto es debido a que los dispositivos se asignan a un objeto del que no es hijo
l&#8217;objet lui-même du premier objet sélectionné à gauche dans l&#8217;arbre (vous pouvez dans votre profil configurer celui-ci)
</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara><?asciidoc-hr?></simpara>
<variablelist>
<varlistentry>
<term>
Al conectar al maestro con los esclavos obtengo errores
</term>
<listitem>
<simpara>
Compruebe que ha puesto el /jeedom correctamente  Si lo utilizas debe ir justo después de la IP jeedom
(a menudo en caso de instalación DIY)
</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara><?asciidoc-hr?></simpara>
<variablelist>
<varlistentry>
<term>
Tengo el siguiente error : SQLSTATE[HY000] [2002] Can&#8217;t connect to local MySQL server through socket <emphasis>/var/run/mysqld/mysqld.sock</emphasis>
</term>
<listitem>
<simpara>
Esto se debe a que MySQL se detiene , no es normal, las posibles causas son :
</simpara>
<itemizedlist>
<listitem>
<simpara>
souci de place sur le système de fichiers (peut être vérifié en faisant la commande "df -h", en ssh)
</simpara>
</listitem>
<listitem>
<simpara>
problème de corruption de fichier(s), arrive souvent suite à un arrêt non propre de Jeedom (coupure de courant)
</simpara>
</listitem>
</itemizedlist>
</listitem>
</varlistentry>
</variablelist>
<simpara>Por desgracia no hay solución en el segundo caso,
Lo mejor sería recuperar una copia de seguridad (disponibles en /usr/share/nginx/www/jeedom/backup por defecto),
de réinstaller Jeedom et de restaurer le backup.
También puedes comprobar desde SSH porque no se ejecuta mysql:</simpara>
<programlisting language="bash" linenumbering="unnumbered">sudo su -
service mysql stop
mysqld --verbose</programlisting>
<simpara>O consultar el registro: /var/log/mysql/error.log</simpara>
<simpara><?asciidoc-hr?></simpara>
<variablelist>
<varlistentry>
<term>
Les boutons Eteindre/Redémarrer ne fonctionnent pas
</term>
<listitem>
<simpara>
En una instalación  DIY es normal hacer uso del comando visudo en SSH
Debe añadir: www-data ALL=(ALL) NOPASSWD: ALL.
</simpara>
</listitem>
</varlistentry>
</variablelist>
<simpara><?asciidoc-hr?></simpara>
<simpara>A menudo obtengo un "502 bad gateway":
Il faut aller (en mode expert) dans la configuration de Jeedom, puis Système OS et cliquer sur Lancer. Là vous cliquez sur "PHP log", si vous avez le message "server reached pm.max_clidren", c&#8217;est qu&#8217;il manque des processus php fpm, il faut donc en autoriser plus. Pour cela faire :</simpara>
<programlisting language="bash" linenumbering="unnumbered">sudo su -
cd /etc/php5/fpm/pool.d/
vim www.conf</programlisting>
<simpara>Editar la linea "pm.max_children" en mettant "pm.max_children = 20"</simpara>
<simpara>Simplemente reinicie php5-fpm</simpara>
<programlisting language="bash" linenumbering="unnumbered">sudo service php5-fpm restart</programlisting>
<variablelist>
<varlistentry>
<term>
Je ne vois pas certains plugins du Market 
</term>
<listitem>
<simpara>
Ce genre de cas arrive si votre Jeedom n&#8217;est pas compatible avec le plugin, en général une mise à jour de jeedom corrige le souci
</simpara>
</listitem>
</varlistentry>
</variablelist>
</article>
